%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax
\ifdefined\pdfimageresolution
    \pdfimageresolution= \numexpr \dimexpr1in\relax/\sphinxpxdimen\relax
\fi
%% let collapsible pdf bookmarks panel have high depth per default
\PassOptionsToPackage{bookmarksdepth=5}{hyperref}

\PassOptionsToPackage{booktabs}{sphinx}
\PassOptionsToPackage{colorrows}{sphinx}

\PassOptionsToPackage{warn}{textcomp}
\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
% support both utf8 and utf8x syntaxes
  \ifdefined\DeclareUnicodeCharacterAsOptional
    \def\sphinxDUC#1{\DeclareUnicodeCharacter{"#1}}
  \else
    \let\sphinxDUC\DeclareUnicodeCharacter
  \fi
  \sphinxDUC{00A0}{\nobreakspace}
  \sphinxDUC{2500}{\sphinxunichar{2500}}
  \sphinxDUC{2502}{\sphinxunichar{2502}}
  \sphinxDUC{2514}{\sphinxunichar{2514}}
  \sphinxDUC{251C}{\sphinxunichar{251C}}
  \sphinxDUC{2572}{\textbackslash}
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}



\usepackage{tgtermes}
\usepackage{tgheros}
\renewcommand{\ttdefault}{txtt}



\usepackage[Bjarne]{fncychap}
\usepackage{sphinx}

\fvset{fontsize=auto}
\usepackage{geometry}


% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}

\addto\captionsenglish{\renewcommand{\contentsname}{Contents:}}

\usepackage{sphinxmessages}
\setcounter{tocdepth}{1}



\title{koeblergothic}
\date{May 05, 2023}
\release{1.0}
\author{Viktor Martinović}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{Release}
\makeindex
\begin{document}

\ifdefined\shorthandoff
  \ifnum\catcode`\=\string=\active\shorthandoff{=}\fi
  \ifnum\catcode`\"=\active\shorthandoff{"}\fi
\fi

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{index::doc}}


\sphinxstepscope


\chapter{Home}
\label{\detokenize{home:home}}\label{\detokenize{home::doc}}

\section{CLDF word list from Gerhard Köbler’s “Gotisches Wörterbuch” (2014)}
\label{\detokenize{home:cldf-word-list-from-gerhard-koblers-gotisches-worterbuch-2014}}

\subsection{How to cite}
\label{\detokenize{home:how-to-cite}}
\sphinxAtStartPar
If you use these data please cite
\begin{itemize}
\item {} 
\sphinxAtStartPar
the original source: Köbler, Gerhard, ed. Gotisches Wörterbuch. Brill, 1989

\item {} 
\sphinxAtStartPar
the derived dataset using the DOI of the \sphinxhref{https://github.com/LoanpyDataHub/koeblergothic/releases}{particular released version} you were using

\end{itemize}


\subsection{Description}
\label{\detokenize{home:description}}
\sphinxAtStartPar
This dataset is licensed under a CC\sphinxhyphen{}BY license

\sphinxAtStartPar
Available online at \sphinxurl{https://www.koeblergerhard.de/got/got.html}


\subsection{Notes}
\label{\detokenize{home:notes}}
\sphinxAtStartPar
\sphinxhref{https://creativecommons.org/licenses/by/4.0/}{\sphinxincludegraphics{{/home/viktor/Documents/GitHub/koeblergothic/docs/doctrees/images/554312bbffabcb804cf4f8c50b1b75a140d3bd2b/by}.svg}} \sphinxhref{https://dl.circleci.com/status-badge/redirect/gh/LoanpyDataHub/koeblergothic/tree/main}{\sphinxincludegraphics{{/home/viktor/Documents/GitHub/koeblergothic/docs/doctrees/images/09619620f04a0b9daccc2b299f02099ffce39f65/main}.svg}} \sphinxhref{https://koeblergothic.readthedocs.io/en/latest/?badge=latest}{\sphinxincludegraphics{{/home/viktor/Documents/GitHub/koeblergothic/docs/doctrees/images/9b30f25f595f5584c40ef1116026fa820e74e472/0f1c33b7db7a03ae02d9075a982c7bfde39b1b7c}.svg}}


\subsection{Statistics}
\label{\detokenize{home:statistics}}
\sphinxAtStartPar
\sphinxhref{https://github.com/martino-vic/koeblergothic/actions?query=workflow\%3ACLDF-validation}{\sphinxincludegraphics{{/home/viktor/Documents/GitHub/koeblergothic/docs/doctrees/images/580b3fd8a4bcaebea8d57e461cbaf9aac282702f/badge}.svg}} \sphinxincludegraphics{{/home/viktor/Documents/GitHub/koeblergothic/docs/doctrees/images/d44641bc24451db56ba1c2f56d656871246a1945/Glottolog-100%25-brightgreen}.svg} \sphinxincludegraphics{{/home/viktor/Documents/GitHub/koeblergothic/docs/doctrees/images/389eb097b9ce58236a5bb6e1dc3e4464ba4cdea7/Concepticon-44%25-red}.svg} \sphinxincludegraphics{{/home/viktor/Documents/GitHub/koeblergothic/docs/doctrees/images/8610b4fe2e7a97bed23df74a39cd30feda0b8612/Source-100%25-brightgreen}.svg}
\sphinxincludegraphics{{/home/viktor/Documents/GitHub/koeblergothic/docs/doctrees/images/54c8ae34ac3ec41286b604aef9bcbad15a74f3de/BIPA-100%25-brightgreen}.svg} \sphinxincludegraphics{{/home/viktor/Documents/GitHub/koeblergothic/docs/doctrees/images/64600fa1cdb6b54d89ce1e5ebac95262ca62a8fc/b8fdf0ffe8e33ddbdc635aa3b469289f77c84efb}.svg} \sphinxincludegraphics{{/home/viktor/Documents/GitHub/koeblergothic/docs/doctrees/images/c3fc0d15caf7cfd7c9ad9b01477f4d06037e63e7/fa63eac5f41847bbc5b468c4072572f6e8080f56}.svg} \sphinxhref{https://pypi.org/project/spacy/}{\sphinxincludegraphics{{/home/viktor/Documents/GitHub/koeblergothic/docs/doctrees/images/2d081927145272de8a9ed568341618987dcea5d3/SpaCy-v3.5}.1-blue}}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Varieties:} 1

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Concepts:} 4,211

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Lexemes:} 4,764

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Sources:} 1

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Synonymy:} 1.13

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Invalid lexemes:} 0

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Tokens:} 28,261

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Segments:} 52 (0 BIPA errors, 0 CLTS sound class errors, 52 CLTS
modified)

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Inventory size (avg):} 52.00

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Senses:} 8,509

\end{itemize}


\section{Contributors}
\label{\detokenize{home:contributors}}

\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TTTT}
\sphinxtoprule
\sphinxstyletheadfamily 
\sphinxAtStartPar
Name
&\sphinxstyletheadfamily 
\sphinxAtStartPar
GitHub user
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Description
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Role
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook
\sphinxAtStartPar
Gerhard Köbler
&&
\sphinxAtStartPar
Gotisches Wörterbuch
&
\sphinxAtStartPar
Editor
\\
\sphinxhline
\sphinxAtStartPar
Viktor Martinović
&
\sphinxAtStartPar
@martino\sphinxhyphen{}vic
&
\sphinxAtStartPar
CLDF conversion
&
\sphinxAtStartPar
Other
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}


\subsection{CLDF Datasets}
\label{\detokenize{home:cldf-datasets}}
\sphinxAtStartPar
The following CLDF datasets are available in \sphinxhref{https://github.com/LoanpyDataHub/koeblergothic/tree/main/cldf}{cldf}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
CLDF
\sphinxhref{https://github.com/cldf/cldf/tree/master/modules/Wordlist}{Wordlist}
at
\sphinxhref{https://github.com/LoanpyDataHub/koeblergothic/blob/main/cldf/cldf-metadata.json}{cldf/cldf\sphinxhyphen{}metadata.json}

\end{itemize}

\sphinxstepscope


\chapter{TL;DR}
\label{\detokenize{TL;DR:id1}}\label{\detokenize{TL;DR::doc}}\phantomsection\label{\detokenize{TL;DR:module-koeblergothiccommands.__init__}}\index{module@\spxentry{module}!koeblergothiccommands.\_\_init\_\_@\spxentry{koeblergothiccommands.\_\_init\_\_}}\index{koeblergothiccommands.\_\_init\_\_@\spxentry{koeblergothiccommands.\_\_init\_\_}!module@\spxentry{module}}
\sphinxAtStartPar
make cldf (downloadsize: 1.5GB+):

\begin{sphinxVerbatim}[commandchars=\\\{\}]
python3\PYG{+w}{ }\PYGZhy{}m\PYG{+w}{ }venv\PYG{+w}{ }venv\PYG{+w}{ }\PYG{o}{\PYGZam{}\PYGZam{}}\PYG{+w}{ }\PYG{n+nb}{source}\PYG{+w}{ }venv/bin/activate

git\PYG{+w}{ }clone\PYG{+w}{ }https://github.com/martino\PYGZhy{}vic/koeblergothic.git
mkdir\PYG{+w}{ }concepticon
\PYG{n+nb}{cd}\PYG{+w}{ }concepticon
git\PYG{+w}{ }clone\PYG{+w}{ }https://github.com/concepticon/concepticon\PYGZhy{}data.git
\PYG{n+nb}{cd}\PYG{+w}{ }..
git\PYG{+w}{ }clone\PYG{+w}{ }https://github.com/glottolog/glottolog.git
git\PYG{+w}{ }clone\PYG{+w}{ }https://github.com/cldf\PYGZhy{}clts/clts.git

pip\PYG{+w}{ }install\PYG{+w}{ }\PYGZhy{}e\PYG{+w}{ }koeblergothic
pip\PYG{+w}{ }install\PYG{+w}{ }loanpy
pip\PYG{+w}{ }install\PYG{+w}{ }pytest\PYGZhy{}cldf

python3\PYG{+w}{ }\PYGZhy{}m\PYG{+w}{ }spacy\PYG{+w}{ }download\PYG{+w}{ }de\PYGZus{}core\PYGZus{}news\PYGZus{}lg

\PYG{n+nb}{cd}\PYG{+w}{ }koeblergothic
cldfbench\PYG{+w}{ }lexibank.makecldf\PYG{+w}{ }cldfbench\PYGZus{}koeblergothic.py\PYG{+w}{  }\PYGZhy{}\PYGZhy{}concepticon\PYGZhy{}version\PYG{o}{=}v2.5.0\PYG{+w}{ }\PYGZhy{}\PYGZhy{}glottolog\PYGZhy{}version\PYG{o}{=}v4.5\PYG{+w}{ }\PYGZhy{}\PYGZhy{}clts\PYGZhy{}version\PYG{o}{=}v2.2.0\PYG{+w}{ }\PYGZhy{}\PYGZhy{}concepticon\PYG{o}{=}../concepticon/concepticon\PYGZhy{}data\PYG{+w}{ }\PYGZhy{}\PYGZhy{}glottolog\PYG{o}{=}../glottolog\PYG{+w}{ }\PYGZhy{}\PYGZhy{}clts\PYG{o}{=}../clts

cldfbench\PYG{+w}{ }koeblergothic.update\PYGZus{}readme

pytest\PYG{+w}{ }\PYGZhy{}\PYGZhy{}cldf\PYGZhy{}metadata\PYG{o}{=}cldf/cldf\PYGZhy{}metadata.json\PYG{+w}{ }test.py
\end{sphinxVerbatim}

\sphinxstepscope


\chapter{Create CLDF}
\label{\detokenize{mkcldf:create-cldf}}\label{\detokenize{mkcldf::doc}}
\sphinxAtStartPar
The following six steps will guide you through the process of
converting raw language data to CLDF. Each step can be found in the
\sphinxhref{https://app.circleci.com/pipelines/github/LoanpyDataHub/koeblergothic}{continuous integration workflow}
as well. The data we are converting comes from
the \sphinxhref{https://www.koeblergerhard.de/got/got.html}{Gothic Dictionary} (Köbler 2014),
which contains Gothic words as headwords, together with their
meaning and a list of sources that have dealt with analysing them.
\sphinxhref{https://glottolog.org/resource/languoid/id/goth1244}{Gothic} belongs to the
Eastern branch of Germanic, which belongs to the
Indo\sphinxhyphen{}European language family. The main data source for Gothic is a
1600 year old bible translation that was rediscovered 354 years ago and has
lead to extensive analyses and the creation of multiple dictionaries ever
since (for example \sphinxhref{https://github.com/martino-vic/streitberggothic}{Streitberg (1910), available
as CLDF}, or \sphinxhref{https://archive.org/details/lehmann-gothic-etymological-dictionary-1986/mode/2up}{Lehmann
(1986)}).
The raw data in this repository contains
only a small fraction of the contents of the dictionary.
If you are passionate about Gothic and want to improve this data
set, check out our \sphinxhref{https://github.com/martino-vic/koeblergothic/blob/main/CONTRIBUTING.md}{contribution guidelines}
and let’s get in touch!


\section{Step 1: Activate virtual environment and clone the repository}
\label{\detokenize{mkcldf:step-1-activate-virtual-environment-and-clone-the-repository}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
python3\PYG{+w}{ }\PYGZhy{}m\PYG{+w}{ }venv\PYG{+w}{ }venv\PYG{+w}{ }\PYG{o}{\PYGZam{}\PYGZam{}}\PYG{+w}{ }\PYG{n+nb}{source}\PYG{+w}{ }venv/bin/activate
git\PYG{+w}{ }clone\PYG{+w}{ }https://github.com/martino\PYGZhy{}vic/koeblergothic.git
\end{sphinxVerbatim}

\sphinxAtStartPar
Deactivate the virtual environment by running

\begin{sphinxVerbatim}[commandchars=\\\{\}]
deactivate
\end{sphinxVerbatim}

\sphinxAtStartPar
See \sphinxhref{https://gerstnerhungarian.readthedocs.io/en/latest/mkcldf.html\#part-1-create-cldf}{Part1, Step 1 in gerstnerhungarian}
for more details.


\section{Step 2: Clone reference catalogues and loanpy}
\label{\detokenize{mkcldf:step-2-clone-reference-catalogues-and-loanpy}}
\sphinxAtStartPar
See \sphinxhref{https://gerstnerhungarian.readthedocs.io/en/latest/mkcldf.html\#step-2-clone-reference-catalogues-and-loanpy}{Part1, Step 2\sphinxhyphen{}3 in gerstnerhungarian}.


\section{Step 3: Install commands, download wordvectors, create orthographic profile}
\label{\detokenize{mkcldf:step-3-install-commands-download-wordvectors-create-orthographic-profile}}
\sphinxAtStartPar
Install necessary dependencies in development mode with the \sphinxcode{\sphinxupquote{\sphinxhyphen{}e}} flag:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
pip\PYG{+w}{ }install\PYG{+w}{ }\PYGZhy{}e\PYG{+w}{ }koeblergothic
pip\PYG{+w}{ }install\PYG{+w}{ }\PYGZhy{}e\PYG{+w}{ }loanpy
\end{sphinxVerbatim}

\sphinxAtStartPar
Install 500MB word\sphinxhyphen{}vector model:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
python3\PYG{+w}{ }\PYGZhy{}m\PYG{+w}{ }spacy\PYG{+w}{ }download\PYG{+w}{ }de\PYGZus{}core\PYGZus{}news\PYGZus{}lg
\end{sphinxVerbatim}

\sphinxAtStartPar
See \sphinxhref{https://gerstnerhungarian.readthedocs.io/en/latest/mkcldf.html\#step-3-install-commands-download-wordvectors-create-orthographic-profile}{Part1, Step 3 in gerstnerhungarian}
for more details.


\section{Step 4: Some preparations}
\label{\detokenize{mkcldf:step-4-some-preparations}}
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{raw/gothic.txt}} is a raw text file that was directly copied from the
original online\sphinxhyphen{}dictionary. It has to be parsed and its relevant parts turned
into tabular data. This is done by running following command:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
cldfbench\PYG{+w}{ }koeblergothic.txt2tsv
\end{sphinxVerbatim}

\sphinxAtStartPar
The output is \sphinxcode{\sphinxupquote{raw/gothic.tsv}}, which will serve as the main input file
for the conversion.

\phantomsection\label{\detokenize{mkcldf:module-koeblergothiccommands.txt2tsv}}\index{module@\spxentry{module}!koeblergothiccommands.txt2tsv@\spxentry{koeblergothiccommands.txt2tsv}}\index{koeblergothiccommands.txt2tsv@\spxentry{koeblergothiccommands.txt2tsv}!module@\spxentry{module}}
\sphinxAtStartPar
Convert \sphinxcode{\sphinxupquote{raw/gothic.txt}} (2.4MB) to \sphinxcode{\sphinxupquote{raw/gothic.tsv}} (127kB), which
contains two columns: \sphinxcode{\sphinxupquote{Gothic}} and \sphinxcode{\sphinxupquote{Meaning}}.
\index{run() (in module koeblergothiccommands.txt2tsv)@\spxentry{run()}\spxextra{in module koeblergothiccommands.txt2tsv}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mkcldf:koeblergothiccommands.txt2tsv.run}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{koeblergothiccommands.txt2tsv.}}\sphinxbfcode{\sphinxupquote{run}}}{\sphinxparam{\DUrole{n,n}{args}}}{}
\pysigstopsignatures\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Read \sphinxcode{\sphinxupquote{raw/gothic.txt}}, which has been copied from
\sphinxurl{https://www.koeblergerhard.de/got/got.html}

\item {} 
\sphinxAtStartPar
Loop through rows

\item {} 
\sphinxAtStartPar
Ignore empty rows

\item {} 
\sphinxAtStartPar
The element left of the first number is the Gothic headword

\item {} 
\sphinxAtStartPar
The element on the right between “nhd. “ (i.e. “neuhochdeutsch”, i.e.
standard German) and the semi\sphinxhyphen{}colon are the meanings in German

\item {} 
\sphinxAtStartPar
Clean the data by removing special characters and brackets with their
contents.

\item {} 
\sphinxAtStartPar
Write it to a table called \sphinxcode{\sphinxupquote{raw/gothic.tsv}}

\end{enumerate}

\end{fulllineitems}


\sphinxAtStartPar
Next, the file \sphinxcode{\sphinxupquote{etc/concepts.tsv}} has to be created with the help of the
\sphinxhref{https://pypi.org/project/pysem/}{pysem} library. \sphinxcode{\sphinxupquote{etc/concepts.tsv}}
serves as basis to create \sphinxcode{\sphinxupquote{cldf/parameters.csv}} during the conversion,
a table that contains references to entries in \sphinxhref{https://concepticon.clld.org/}{Concepticon}. Create it by running:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
cldfbench\PYG{+w}{ }koeblergothic.map2concepts
\end{sphinxVerbatim}
\phantomsection\label{\detokenize{mkcldf:module-koeblergothiccommands.map2concepts}}\index{module@\spxentry{module}!koeblergothiccommands.map2concepts@\spxentry{koeblergothiccommands.map2concepts}}\index{koeblergothiccommands.map2concepts@\spxentry{koeblergothiccommands.map2concepts}!module@\spxentry{module}}
\sphinxAtStartPar
Map concepts to concepticon with the pysem library.
\index{run() (in module koeblergothiccommands.map2concepts)@\spxentry{run()}\spxextra{in module koeblergothiccommands.map2concepts}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mkcldf:koeblergothiccommands.map2concepts.run}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{koeblergothiccommands.map2concepts.}}\sphinxbfcode{\sphinxupquote{run}}}{\sphinxparam{\DUrole{n,n}{args}}}{}
\pysigstopsignatures\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Read \sphinxcode{\sphinxupquote{raw/gothic.tsv}}

\item {} 
\sphinxAtStartPar
Loop through data and turn it into a dictionary

\item {} 
\sphinxAtStartPar
Input that dictionary to pysem’s to\_concepticon function

\item {} 
\sphinxAtStartPar
Add the mappings to a new column where available

\item {} 
\sphinxAtStartPar
Write the new file to \sphinxcode{\sphinxupquote{etc/concepts.tsv}}

\end{enumerate}

\end{fulllineitems}


\sphinxAtStartPar
Lastly, we are creating orthographic profiles with the help of the
\sphinxhref{https://pypi.org/project/epitran/}{epitran} library and lingpy’s
\sphinxhref{https://lingpy.readthedocs.io/en/latest/reference/lingpy.sequence.html\#lingpy.sequence.sound\_classes.ipa2tokens}{ipa2tokens}
function. The resulting file, \sphinxcode{\sphinxupquote{etc/orthography.tsv}} will be the basis for
creating the column \sphinxcode{\sphinxupquote{Segment}} in \sphinxcode{\sphinxupquote{cldf/forms.csv}}, which contains
tokenised IPA transcriptions of words. This command takes \sphinxcode{\sphinxupquote{cldf/forms.csv}}
as input and can therefore be only run once the lexibank\_script was exectuted
successfully. This can sometimes mean that you have to comment out certain
parts of the lexibank\sphinxhyphen{}script to make it run, then create the correct
orthographic profiles, then uncomment and rerun the lexibank script
(especially when there are BIPA transcription errors, it means your
orthographic profiles are not up to date).

\sphinxAtStartPar
Create orthographic profiles by running:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
cldfbench\PYG{+w}{ }koeblergothic.makeortho
\end{sphinxVerbatim}
\phantomsection\label{\detokenize{mkcldf:module-koeblergothiccommands.makeortho}}\index{module@\spxentry{module}!koeblergothiccommands.makeortho@\spxentry{koeblergothiccommands.makeortho}}\index{koeblergothiccommands.makeortho@\spxentry{koeblergothiccommands.makeortho}!module@\spxentry{module}}
\sphinxAtStartPar
IPA\sphinxhyphen{}transcribe and tokenise Gothic words with epitran and lingpy.
The transcription rules were created based on Braune (2004) and contributed
to epitran through a pull request.
\index{run() (in module koeblergothiccommands.makeortho)@\spxentry{run()}\spxextra{in module koeblergothiccommands.makeortho}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{mkcldf:koeblergothiccommands.makeortho.run}}
\pysigstartsignatures
\pysiglinewithargsret{\sphinxcode{\sphinxupquote{koeblergothiccommands.makeortho.}}\sphinxbfcode{\sphinxupquote{run}}}{\sphinxparam{\DUrole{n,n}{args}}}{}
\pysigstopsignatures\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Read values from \sphinxcode{\sphinxupquote{raw/gothic.tsv}}

\item {} 
\sphinxAtStartPar
Loop through this file row by row

\item {} 
\sphinxAtStartPar
Transcribe column \sphinxcode{\sphinxupquote{Gothic}} to \sphinxhref{https://www.internationalphoneticassociation.org/sites/default/files/IPA\_Kiel\_2015.pdf}{IPA}

\item {} 
\sphinxAtStartPar
Tokenise the IPA\sphinxhyphen{}transcription

\item {} 
\sphinxAtStartPar
Write the result to \sphinxcode{\sphinxupquote{etc/orthography.tsv}}

\end{enumerate}

\end{fulllineitems}



\section{Step 5: Run lexibank script}
\label{\detokenize{mkcldf:step-5-run-lexibank-script}}
\sphinxAtStartPar
This script combines files from the raw and etc folders and populates the
folder \sphinxcode{\sphinxupquote{cldf}}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
cldfbench\PYG{+w}{ }lexibank.makecldf\PYG{+w}{ }cldfbench\PYGZus{}koeblergothic.py\PYG{+w}{  }\PYGZhy{}\PYGZhy{}concepticon\PYGZhy{}version\PYG{o}{=}v3.1.0\PYG{+w}{ }\PYGZhy{}\PYGZhy{}glottolog\PYGZhy{}version\PYG{o}{=}v4.7\PYG{+w}{ }\PYGZhy{}\PYGZhy{}clts\PYGZhy{}version\PYG{o}{=}v2.2.0\PYG{+w}{ }\PYGZhy{}\PYGZhy{}concepticon\PYG{o}{=}../concepticon/concepticon\PYGZhy{}data\PYG{+w}{ }\PYGZhy{}\PYGZhy{}glottolog\PYG{o}{=}../glottolog\PYG{+w}{ }\PYGZhy{}\PYGZhy{}clts\PYG{o}{=}../clts
cldfbench\PYG{+w}{ }koeblergothic.update\PYGZus{}readme
\end{sphinxVerbatim}

\sphinxAtStartPar
For a detailed explanation of what this script does, read the the tutorial at
\sphinxurl{https://calc.hypotheses.org/3318} and \sphinxhref{https://gerstnerhungarian.readthedocs.io/en/latest/mkcldf.html\#step-4-run-lexibank-script}{Part1, Step 4 in gerstnerhungarian}.

\sphinxAtStartPar
The below description will only cover differences that weren’t discussed
in the earlier tutorials yet:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kn}{import} \PYG{n+nn}{csv}
\end{sphinxVerbatim}

\sphinxAtStartPar
This inbuilt library will be used to write the table \sphinxcode{\sphinxupquote{cldf/adapt.csv}}
containing predicted loanword adaptations with short primary and foreign
keys to save disc space.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{ad} \PYG{o}{=} \PYG{n}{Adrc}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{etc/WOT2EAHsc.json}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{etc/invsEAH.json}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{HOWMANY} \PYG{o}{=} \PYG{l+m+mi}{100}
\end{sphinxVerbatim}

\sphinxAtStartPar
The file \sphinxcode{\sphinxupquote{etc/WOT2EAHsc.json}} is the sound correspondence file for
predicting loanword adaptations into Early Ancient Hungarian, and
\sphinxcode{\sphinxupquote{etc/invsEAH.json}} is the phonotactic inventory file.
We have generated these in \sphinxhref{https://ronataswestoldturkic.readthedocs.io/en/latest/mkloanpy.html\#part-3-analyse-data-with-loanpy}{Part 3, steps 1\sphinxhyphen{}3 of the ronataswestoldturkic
repository}
and create an instance of the Adrc\sphinxhyphen{}object now based on that
information.
The files itself have been directly copied from the
\sphinxcode{\sphinxupquote{ronataswestoldturkic/loanpy}} folder.

\sphinxAtStartPar
With \sphinxcode{\sphinxupquote{HOWMANY = 100}} we specify that we want 100 loanword adaptation
predictions per input word.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{def} \PYG{n+nf}{trim}\PYG{p}{(}\PYG{n}{word}\PYG{p}{)}\PYG{p}{:}
    \PYG{k}{if} \PYG{n}{word} \PYG{o}{==} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{an}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:}
        \PYG{k}{return} \PYG{n}{word}
    \PYG{k}{return} \PYG{n}{re}\PYG{o}{.}\PYG{n}{sub}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{an\PYGZdl{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{word}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxAtStartPar
Here we trim the sequence “an” from the end of Gothic words, since this
is a suffix that marks the infinitive and is not part of the remaining
etymology of a word, which we care about.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nd}{@attr}\PYG{o}{.}\PYG{n}{s}
\PYG{k}{class} \PYG{n+nc}{CustomLexeme}\PYG{p}{(}\PYG{n}{Lexeme}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{ProsodicStructure} \PYG{o}{=} \PYG{n}{attr}\PYG{o}{.}\PYG{n}{ib}\PYG{p}{(}\PYG{n}{default}\PYG{o}{=}\PYG{k+kc}{None}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxAtStartPar
Here we are defining a custom column called \sphinxcode{\sphinxupquote{ProsodicStructure}} in
\sphinxcode{\sphinxupquote{cldf/forms.csv}}. It will contain the phonotactic structures of
headwords, like “CVCV”, for example.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{args}\PYG{o}{.}\PYG{n}{writer}\PYG{o}{.}\PYG{n}{cldf}\PYG{o}{.}\PYG{n}{add\PYGZus{}component}\PYG{p}{(}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SenseTable}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Spacy}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{datatype}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{string}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}\PYG{p}{,}
    \PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{name}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Form\PYGZus{}ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{datatype}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{string}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{\PYGZcb{}}
\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxAtStartPar
Here we are creating a new table that will be called \sphinxcode{\sphinxupquote{cldf/senses.csv}} (see
\sphinxhref{https://github.com/cldf/cldf/tree/master/components/senses}{SenseTable}
and the \sphinxhref{https://github.com/cldf/cldf/tree/master/components}{list of available table types}).
The column \sphinxcode{\sphinxupquote{Meaning}} in \sphinxcode{\sphinxupquote{raw/gothic.tsv}} contains multiple
English translations separated by a comma and a space. This is an
array\sphinxhyphen{}like data\sphinxhyphen{}structure,
which in relational databases should be avoided. With the sense\sphinxhyphen{}table,
we are therefore giving each translation in the list of meanings an own row
and a foreign key that points to the corresponding row in \sphinxcode{\sphinxupquote{cldf/forms.csv}}.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{args}\PYG{o}{.}\PYG{n}{writer}\PYG{o}{.}\PYG{n}{add\PYGZus{}sources}\PYG{p}{(}\PYG{p}{)}
\PYG{n}{args}\PYG{o}{.}\PYG{n}{log}\PYG{o}{.}\PYG{n}{info}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{added sources}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxAtStartPar
Here we are adding the source from the
\sphinxhref{https://de.wikipedia.org/wiki/BibTeX}{BibTex} file \sphinxcode{\sphinxupquote{raw/sources.bib}} to
the \sphinxcode{\sphinxupquote{cldf}} folder and print a message to the console after this step
was successful.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{concepts} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{p}{\PYGZcb{}}
\PYG{k}{for} \PYG{n}{i}\PYG{p}{,} \PYG{n}{concept} \PYG{o+ow}{in} \PYG{n+nb}{enumerate}\PYG{p}{(}\PYG{n}{tqdm}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{concepts}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Check vectors}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{idx} \PYG{o}{=} \PYG{n+nb}{str}\PYG{p}{(}\PYG{n}{i}\PYG{p}{)}\PYG{o}{+}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZus{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{+}\PYG{n}{slug}\PYG{p}{(}\PYG{n}{concept}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Sense}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{concepts}\PYG{p}{[}\PYG{n}{concept}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Sense}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{]} \PYG{o}{=} \PYG{n}{idx}
    \PYG{n}{args}\PYG{o}{.}\PYG{n}{writer}\PYG{o}{.}\PYG{n}{add\PYGZus{}concept}\PYG{p}{(}
            \PYG{n}{ID}\PYG{o}{=}\PYG{n}{idx}\PYG{p}{,}
            \PYG{n}{Name}\PYG{o}{=}\PYG{n}{concept}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Sense}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{,}
            \PYG{n}{Concepticon\PYGZus{}ID}\PYG{o}{=}\PYG{n}{concept}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Concepticon\PYGZus{}ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{,}
            \PYG{n}{Concepticon\PYGZus{}Gloss}\PYG{o}{=}\PYG{n}{concept}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Concepticon\PYGZus{}Gloss}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{,}
            \PYG{p}{)}
\end{sphinxVerbatim}

\sphinxAtStartPar
Here we are creating the file \sphinxcode{\sphinxupquote{cldf/parameters.csv}}, which will hold
references to concepts in \sphinxhref{https://concepticon.clld.org/}{Concepticon}.
The \sphinxcode{\sphinxupquote{self.concepts}} part reads the file \sphinxcode{\sphinxupquote{etc/concepts.tsv}}, which
was created with the \sphinxhref{https://pypi.org/project/pysem/}{pysem} library
during the previous step. The tqdm\sphinxhyphen{}library prints
a progressbar to the console.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{for} \PYG{n}{j}\PYG{p}{,} \PYG{n}{sense\PYGZus{}desc} \PYG{o+ow}{in} \PYG{n+nb}{enumerate}\PYG{p}{(}\PYG{n}{concept}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Sense}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{o}{.}\PYG{n}{split}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{, }\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{vector} \PYG{o}{=} \PYG{n}{filter\PYGZus{}vectors}\PYG{p}{(}\PYG{n}{sense\PYGZus{}desc}\PYG{p}{)}
    \PYG{n}{args}\PYG{o}{.}\PYG{n}{writer}\PYG{o}{.}\PYG{n}{objects}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{SenseTable}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{o}{.}\PYG{n}{append}\PYG{p}{(}\PYG{p}{\PYGZob{}}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n+nb}{str}\PYG{p}{(}\PYG{n}{i}\PYG{p}{)} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZus{}}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{+} \PYG{n}{slug}\PYG{p}{(}\PYG{n}{sense\PYGZus{}desc}\PYG{p}{)} \PYG{o}{+} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{\PYGZhy{}}\PYG{l+s+s2}{\PYGZdq{}} \PYG{o}{+} \PYG{n+nb}{str}\PYG{p}{(}\PYG{n}{j} \PYG{o}{+} \PYG{l+m+mi}{1}\PYG{p}{)}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Entry\PYGZus{}ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+m+mi}{0}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Description}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{sense\PYGZus{}desc}\PYG{o}{.}\PYG{n}{strip}\PYG{p}{(}\PYG{p}{)}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Spacy}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{vector}\PYG{p}{,}
        \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Parameter\PYGZus{}ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{idx}
        \PYG{p}{\PYGZcb{}}\PYG{p}{)}

\PYG{n}{args}\PYG{o}{.}\PYG{n}{log}\PYG{o}{.}\PYG{n}{info}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{added concepts and senses}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxAtStartPar
Within the previous loop, that goes through the rows of \sphinxcode{\sphinxupquote{etc/concepts.tsv}}
one by one, we start a second loop. It goes through the different
translations that originate from the column \sphinxcode{\sphinxupquote{Meaning}} in
\sphinxcode{\sphinxupquote{raw/gothic.tsv}}. It puts each translation into an own row of
\sphinxcode{\sphinxupquote{cldf/senses.tsv}} and provides a foreign key in column \sphinxcode{\sphinxupquote{Parameter\_ID}}.
This foreign key points to the primary key in \sphinxcode{\sphinxupquote{parameters.csv}} and to the
foreign keys in \sphinxcode{\sphinxupquote{Parameter\_ID}} in \sphinxcode{\sphinxupquote{cldf/forms.csv}}. The column
\sphinxcode{\sphinxupquote{Entry\_ID}} is a default column and must be populated even if it is not
pointing anywhere. Therefore, it contains only zeroes.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{languages} \PYG{o}{=} \PYG{n}{args}\PYG{o}{.}\PYG{n}{writer}\PYG{o}{.}\PYG{n}{add\PYGZus{}languages}\PYG{p}{(}\PYG{p}{)}
\PYG{n}{args}\PYG{o}{.}\PYG{n}{log}\PYG{o}{.}\PYG{n}{info}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{added languages}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}

\PYG{n}{data} \PYG{o}{=} \PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{raw\PYGZus{}dir}\PYG{o}{.}\PYG{n}{read\PYGZus{}csv}\PYG{p}{(}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{gothic.tsv}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{delimiter}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+se}{\PYGZbs{}t}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
\PYG{p}{)}
\PYG{n}{header} \PYG{o}{=} \PYG{n}{data}\PYG{p}{[}\PYG{l+m+mi}{0}\PYG{p}{]}
\PYG{n}{cognates} \PYG{o}{=} \PYG{p}{\PYGZob{}}\PYG{p}{\PYGZcb{}}
\PYG{n}{cogidx} \PYG{o}{=} \PYG{l+m+mi}{1}
\PYG{n}{adidx} \PYG{o}{=} \PYG{l+m+mi}{1}
\end{sphinxVerbatim}

\sphinxAtStartPar
Here, we are reading the file \sphinxcode{\sphinxupquote{etc/languages.tsv}}, writing it to
\sphinxcode{\sphinxupquote{cldf/languages.tsv}} without modification, and print a message to
the console upon success. Then, we read \sphinxcode{\sphinxupquote{raw/gothic.tsv}}, define the
header and instantiate some variables that we will need later during this
script.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{with} \PYG{n+nb}{open}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{cldf/adapt}\PYG{l+s+si}{\PYGZob{}HOWMANY\PYGZcb{}}\PYG{l+s+s2}{.csv}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{w+}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{k}{as} \PYG{n}{f}\PYG{p}{:}
    \PYG{n}{writer} \PYG{o}{=} \PYG{n}{csv}\PYG{o}{.}\PYG{n}{writer}\PYG{p}{(}\PYG{n}{f}\PYG{p}{)}
    \PYG{n}{writer}\PYG{o}{.}\PYG{n}{writerow}\PYG{p}{(}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Form\PYGZus{}ID}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+sa}{f}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ad}\PYG{l+s+si}{\PYGZob{}}\PYG{n}{HOWMANY}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{)}
\end{sphinxVerbatim}

\sphinxAtStartPar
Since the CLDF architecture doesn’t allow for custom\sphinxhyphen{}tables, we have to
open one without the cldf\sphinxhyphen{}writer. This means that the file that we are
creating will not be included in \sphinxcode{\sphinxupquote{cldf/metadata.json}} and hence will
be excluded when creating a database from metadata alone. The file we are
writing will contain predicted loanword adaptations of Gothic words into
Early Ancient Hungarian. Since we have multiple predictions that are
outputted as an array and since arrays should not be used as data\sphinxhyphen{}structures
in relational databases, we are creating a new table \sphinxcode{\sphinxupquote{adapt100.py}}
(since we have set the variable HOWMANY to 100 in the beginning). We
are also writing the names of its three columns to the file. \sphinxcode{\sphinxupquote{ID}} is the
primary key, \sphinxcode{\sphinxupquote{Form\_ID}} points to the rows in column \sphinxcode{\sphinxupquote{Local\_ID}} in
\sphinxcode{\sphinxupquote{cldf/forms.csv}} and \sphinxcode{\sphinxupquote{ad\{HOWMANY\}}} contains as many of the most likely
predictions for loanword adaptation of each Gothic word, as we have defined
it in the static variable \sphinxcode{\sphinxupquote{HOWMANY}} earlier.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{for} \PYG{n}{i}\PYG{p}{,} \PYG{n}{row} \PYG{o+ow}{in} \PYG{n+nb}{enumerate}\PYG{p}{(}\PYG{n+nb+bp}{self}\PYG{o}{.}\PYG{n}{raw\PYGZus{}dir}\PYG{o}{.}\PYG{n}{read\PYGZus{}csv}\PYG{p}{(}
    \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{gothic.tsv}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{delimiter}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+se}{\PYGZbs{}t}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{dicts}\PYG{o}{=}\PYG{k+kc}{True}
        \PYG{p}{)}\PYG{p}{)}\PYG{p}{:}

    \PYG{n}{args}\PYG{o}{.}\PYG{n}{writer}\PYG{o}{.}\PYG{n}{add\PYGZus{}form}\PYG{p}{(}
            \PYG{n}{Form}\PYG{o}{=}\PYG{n}{trim}\PYG{p}{(}\PYG{n}{row}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Gothic}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{)}\PYG{p}{,}
            \PYG{n}{Language\PYGZus{}ID}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Gothic}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
            \PYG{n}{Parameter\PYGZus{}ID}\PYG{o}{=}\PYG{n}{concepts}\PYG{p}{[}\PYG{n}{row}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Meaning}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{]}\PYG{p}{,}
            \PYG{n}{Value}\PYG{o}{=}\PYG{n}{row}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Gothic}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{,}
            \PYG{n}{Source}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Kobler1989}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
            \PYG{n}{Local\PYGZus{}ID}\PYG{o}{=}\PYG{l+s+sa}{f}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{f}\PYG{l+s+si}{\PYGZob{}}\PYG{n}{i}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}
            \PYG{p}{)}
    \PYG{n}{lex} \PYG{o}{=} \PYG{n}{args}\PYG{o}{.}\PYG{n}{writer}\PYG{o}{.}\PYG{n}{objects}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{FormTable}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{[}\PYG{n}{i}\PYG{p}{]}
    \PYG{n}{pros} \PYG{o}{=} \PYG{n}{ipa}\PYG{o}{.}\PYG{n}{get\PYGZus{}prosody}\PYG{p}{(}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ }\PYG{l+s+s2}{\PYGZdq{}}\PYG{o}{.}\PYG{n}{join}\PYG{p}{(}\PYG{n}{lex}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Segments}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{)}\PYG{p}{)}\PYG{p}{)}
    \PYG{n}{lex}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ProsodicStructure}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]} \PYG{o}{=} \PYG{n}{pros}
\end{sphinxVerbatim}

\sphinxAtStartPar
Here we are creating the file \sphinxcode{\sphinxupquote{cldf/forms.csv}} by looping
through the rows of \sphinxcode{\sphinxupquote{raw/gothic.tsv}}. The columns \sphinxcode{\sphinxupquote{Language\_ID}} and
\sphinxcode{\sphinxupquote{Source}} are hard\sphinxhyphen{}coded since the repository is based on one single source
and only contains one single language. The column \sphinxcode{\sphinxupquote{Parameter\_ID}} contains
the foreign keys to \sphinxcode{\sphinxupquote{cldf/parameters.csv}}. The column \sphinxcode{\sphinxupquote{Value}} is the
same as the column \sphinxcode{\sphinxupquote{Gothic}} in \sphinxcode{\sphinxupquote{raw/gothic.tsv}}. The column
\sphinxcode{\sphinxupquote{ProsodicStructure}} has to be inserted through a loop, after the table
\sphinxcode{\sphinxupquote{cldf/forms.csv}} has already been created, since it is taking contents
from one of its columns, namely \sphinxcode{\sphinxupquote{Segments}} as input. Its output are
phonotactic profiles such as “CVCV”. These are created with loanpy’s
\sphinxhref{https://loanpy.readthedocs.io/en/latest/documentation.html\#loanpy.utils.IPA.get\_prosody}{get\_prosody}
function.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{for} \PYG{n}{pred} \PYG{o+ow}{in} \PYG{n}{ad}\PYG{o}{.}\PYG{n}{adapt}\PYG{p}{(}\PYG{n}{lex}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Segments}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{,} \PYG{n}{HOWMANY}\PYG{p}{)}\PYG{p}{:}
    \PYG{n}{writer}\PYG{o}{.}\PYG{n}{writerow}\PYG{p}{(}\PYG{p}{[}\PYG{l+s+sa}{f}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{a}\PYG{l+s+si}{\PYGZob{}}\PYG{n}{adidx}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+sa}{f}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{f}\PYG{l+s+si}{\PYGZob{}}\PYG{n+nb}{str}\PYG{p}{(}\PYG{n}{i}\PYG{p}{)}\PYG{l+s+si}{\PYGZcb{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{pred}\PYG{p}{]}\PYG{p}{)}
    \PYG{n}{adidx} \PYG{o}{+}\PYG{o}{=} \PYG{l+m+mi}{1}
\end{sphinxVerbatim}

\sphinxAtStartPar
Here we are predicting loanword adaptation with loanpy, based on heuristics
and data extracted from the etymological dictionary “West Old Turkic”
in the repository \sphinxhref{https://ronataswestoldturkic.readthedocs.io/en/latest/home.html}{ronataswestoldturkic}. We
are making 100 predictions per word, this number was set earlier through the
\sphinxcode{\sphinxupquote{HOWMANY}} variable. We write the references to
\sphinxcode{\sphinxupquote{cldf/adapt.csv}} and add a primary key and a foreign key to reference
rows in \sphinxcode{\sphinxupquote{cldf/forms.csv}}.

\sphinxAtStartPar
This is how your console should approximately look like after the conversion:

\noindent\sphinxincludegraphics{{consoleoutput}.png}


\section{Step 6: Post\sphinxhyphen{}process and verify CLDF\sphinxhyphen{}conformity}
\label{\detokenize{mkcldf:step-6-post-process-and-verify-cldf-conformity}}
\sphinxAtStartPar
To update the readme run:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
cldfbench\PYG{+w}{ }koeblergothic.update\PYGZus{}readme
\end{sphinxVerbatim}

\sphinxAtStartPar
And to test for CLDF\sphinxhyphen{}conformity run:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
pip\PYG{+w}{ }install\PYG{+w}{ }pytest\PYGZhy{}cldf
pytest\PYG{+w}{ }\PYGZhy{}\PYGZhy{}cldf\PYGZhy{}metadata\PYG{o}{=}cldf/cldf\PYGZhy{}metadata.json\PYG{+w}{ }test.py
\end{sphinxVerbatim}

\sphinxAtStartPar
See \sphinxhref{https://gerstnerhungarian.readthedocs.io/en/latest/mkcldf.html\#step-6-test-with-pytest-cldf-whether-the-dataset-conforms-to-cldf}{Part 1, Step 6 in gerstnerhungarian}
for more details.


\chapter{Indices and tables}
\label{\detokenize{index:indices-and-tables}}\begin{itemize}
\item {} 
\sphinxAtStartPar
\DUrole{xref,std,std-ref}{genindex}

\item {} 
\sphinxAtStartPar
\DUrole{xref,std,std-ref}{modindex}

\item {} 
\sphinxAtStartPar
\DUrole{xref,std,std-ref}{search}

\end{itemize}


\renewcommand{\indexname}{Python Module Index}
\begin{sphinxtheindex}
\let\bigletter\sphinxstyleindexlettergroup
\bigletter{k}
\item\relax\sphinxstyleindexentry{koeblergothiccommands.\_\_init\_\_}\sphinxstyleindexpageref{TL;DR:\detokenize{module-koeblergothiccommands.__init__}}
\item\relax\sphinxstyleindexentry{koeblergothiccommands.makeortho}\sphinxstyleindexpageref{mkcldf:\detokenize{module-koeblergothiccommands.makeortho}}
\item\relax\sphinxstyleindexentry{koeblergothiccommands.map2concepts}\sphinxstyleindexpageref{mkcldf:\detokenize{module-koeblergothiccommands.map2concepts}}
\item\relax\sphinxstyleindexentry{koeblergothiccommands.txt2tsv}\sphinxstyleindexpageref{mkcldf:\detokenize{module-koeblergothiccommands.txt2tsv}}
\end{sphinxtheindex}

\renewcommand{\indexname}{Index}
\printindex
\end{document}